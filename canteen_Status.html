<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status</title>
    <link rel="stylesheet" href="canteen_status.css">
    <link rel="icon" href="log_mera.jpeg">
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js" type="module"></script>
    

</head>
<header>
   
</header>
<body>
    

<div style="margin-top: 5cm;margin-bottom: 2cm;width: 240px;margin-left: 14cm;background-color: rgb(168, 132, 132);padding: 1%;">
        <fieldset>
            <legend>Canteen Name</legend>
            <input type="text" style="width: 150px;margin-left: 0.70cm;" id="search">
        </fieldset>

        <button type="submit" id="search_it" style="margin-left: 2.4cm;margin-top: 0.2cm;">Search</button>
</div>

<div>
    <ul id="my_list">
        <li></li>
    </ul>
</div>

    <div id="table_content" style="margin-top: 1cm;" >
        <table style="max-width: 500px;">
        <tr>
            <th>Name of Canteen Owner</th>
            <th>Canteen Name</th>
            <th>Contact number</th>
            <th>Status of Canteen</th>
        </tr>
        <tr>
            <td id="Owner"></td>
            <td id="canteen_n"></td>
            <td id="Contact"></td>
            <td id="status"></td>
        </tr>
        </table>
    </div>

    <nav>
        <h1 style="margin-left: 60px; font-size: 40px;margin-top: 25px;font-family: cursive;" ></h1>
        <ul>
            <img src="log_mera.jpeg" alt="" height="147px" width="147px" style="float: left; border-radius: 50%; margin-top: -12px; margin-left: -1px;">
           <a href="Login_window.html" class="nav_btn1"  title="Click here to redirect to login page" onmouseover="document.getElementById('drop_down').style.display = 'block';" > <li class="li1"><b> Login/Signup</b></li></a>
           <a href="index.html" class="nav_btn3" title="get back to home page"><li class="li3"><b>Home</b></li></a>
                
        </ul>
    </nav>

    <div>

    </div>

    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
    import { getDatabase , ref, onValue, child, get} from "https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js";

const firebaseConfig = {
      //****************** add your configaration here *******************//
      apiKey: "AIzaSyBf_inD4Hqb2zqkmCuha69YEEgZ0EvSdDI",
  authDomain: "canteen-live-status-65e71.firebaseapp.com",
  databaseURL: "https://canteen-live-status-65e71-default-rtdb.firebaseio.com",
  projectId: "canteen-live-status-65e71",
  storageBucket: "canteen-live-status-65e71.appspot.com",
  messagingSenderId: "427128725985",
  appId: "1:427128725985:web:161d9f41d3e126af35b2a0",
  measurementId: "G-YH01SPNTT2"
    };

    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
       const database = getDatabase(app);
      const dbRef = ref(database);
function searching(){
    get(child(dbRef, `users/` + document.getElementById('search').value + `/canteen_owner`)).then((snapshot) => {
  if (snapshot.exists()) {
  document.getElementById('Owner').innerHTML = (snapshot.val());
  } else {
    console.log("No data available");
  }
}).catch((error) => {
  console.error("error_owner_wala");
});



get(child(dbRef, `users/` + document.getElementById('search').value + `/canteen_name`)).then((snapshot) => {
  if (snapshot.exists()) {
  document.getElementById('canteen_n').innerHTML = (snapshot.val());
  } else {
    console.log("No data available");
  }
}).catch((error) => {
  console.error("error_cateen_name_Wala");
});


get(child(dbRef, `users/` + document.getElementById('search').value + `/contact_number`)).then((snapshot) => {
  if (snapshot.exists()) {
  document.getElementById('Contact').innerHTML = (snapshot.val());
  } else {
    console.log("No data available");
  }
}).catch((error) => {
  console.error("error_contact_number_Wala");
});


get(child(dbRef, `users/` + document.getElementById('search').value + `/status`)).then((snapshot) => {
  if (snapshot.exists()) {
  document.getElementById('status').innerHTML = (snapshot.val());
  } else {
    console.log("No data available");
  }
}).catch((error) => {
  console.error("error_canteen_status");
});
}

document.getElementById('search_it').addEventListener('click', searching);

// function creatingTable(cant_NAME, own_name, stats, cont_numb){
//     let trow = document.createElement('tr');
//     let td1 = document.createElement('td');
//     let td2 = document.createElement('td');
//     let td3 = document.createElement('td');
//     let td4 = document.createElement('td');

//     td1.innerHTML = cant_NAME;
//     td2.innerHTML = own_name;
//     td3.innerHTML = stats;
//     td4.innerHTML = cont_numb;

//     trow.appendChild(td1);
//     trow.appendChild(td2);
//     trow.appendChild(td3);
//     trow.appendChild(td4);

//     function AddItemsToTable(CLASS){
//         CLASS.forEach(element => {
//            creatingTable(element.canteen_name, element.canteen_owner, element.status, element.contact_number); 
//         });
//     }



  
// }



// function getDATA(){
//     const dbRef = ref(database);
//     get(child(dbRef, 'users'))
//     .then((snapshot)=>{
//         var user = [];

//         snapshot.forEach(childSnapshot=>{
//              user.push(childSnapshot.val());
//         });
//         AddItemsToTable(user);
//     })
// }


// window.onload =getDATA;

 


    </script>
</body>       
</html>
